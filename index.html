<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚ú® FiveM Bind Creator</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Fredoka+One&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0d0d12;
    --surface: #13131c;
    --surface2: #1c1c2a;
    --border: #2e2e45;
    --purple: #b06eff;
    --purple2: #7c3aed;
    --pink: #e879f9;
    --text: #ede9f8;
    --muted: #7a708e;
    --green: #a3e635;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Nunito', sans-serif;
    min-height: 100vh;
    background-image:
      radial-gradient(ellipse at 15% 0%, rgba(124,58,237,0.13) 0%, transparent 55%),
      radial-gradient(ellipse at 85% 100%, rgba(232,121,249,0.08) 0%, transparent 55%);
  }

  body::before {
    content: '‚ú¶ Àö ¬∑ ‚úß Àö ¬∑ ‚ú¶ ‚úß ¬∑ Àö ‚ú¶ ¬∑ ‚úß Àö ‚ú¶ ¬∑ Àö ‚úß ¬∑ ‚ú¶ Àö ‚úß ¬∑ Àö ‚ú¶ ‚úß Àö ‚ú¶ ¬∑ Àö ‚úß ¬∑ ‚ú¶';
    position: fixed;
    top: 70px; left: 0; right: 0;
    font-size: 13px;
    color: rgba(176,110,255,0.1);
    letter-spacing: 16px;
    line-height: 52px;
    white-space: pre-wrap;
    word-break: break-all;
    pointer-events: none;
    z-index: 0;
    height: 100%;
    overflow: hidden;
  }

  header {
    position: sticky; top: 0; z-index: 20;
    background: rgba(13,13,18,0.88);
    backdrop-filter: blur(18px);
    border-bottom: 1px solid var(--border);
    padding: 16px 32px;
    display: flex; align-items: center; gap: 14px;
  }

  .logo { font-size: 28px; display: inline-block; }
  @keyframes wiggle { 0%,100%{transform:rotate(-6deg)} 50%{transform:rotate(6deg)} }

  h1 {
    font-family: 'Fredoka One', cursive;
    font-size: 25px;
    background: linear-gradient(90deg, var(--purple), var(--pink));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  }

  .subtitle { font-size: 11px; color: var(--muted); margin-top: 2px; font-weight: 700; letter-spacing: 1px; }

  main {
    position: relative; z-index: 1;
    max-width: 760px; margin: 0 auto;
    padding: 32px 18px 80px;
    display: flex; flex-direction: column; gap: 18px;
  }

  /* CARD */
  .card {
    background: var(--surface);
    border: 1.5px solid var(--border);
    border-radius: 22px;
    padding: 22px 20px;
    position: relative; overflow: hidden;
    transition: border-color 0.3s;
  }

  .card::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px;
    background: linear-gradient(90deg, transparent, var(--purple), var(--pink), transparent);
    opacity: 0; transition: opacity 0.3s;
  }

  .card:focus-within::before, .card:hover::before { opacity: 1; }
  .card:hover { border-color: rgba(176,110,255,0.28); }

  /* STEP */
  .step-header { display: flex; align-items: center; gap: 11px; margin-bottom: 5px; }

  .step-badge {
    background: linear-gradient(135deg, var(--purple2), var(--purple));
    color: white; font-family: 'Fredoka One', cursive; font-size: 15px;
    width: 33px; height: 33px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0; box-shadow: 0 0 16px rgba(176,110,255,0.4);
  }

  .step-title { font-family: 'Fredoka One', cursive; font-size: 18px; color: #fff; }

  .step-desc {
    font-size: 12.5px; color: var(--muted); margin-bottom: 16px;
    line-height: 1.85; padding-left: 44px;
  }
  .step-desc strong { color: var(--purple); font-weight: 900; }

  /* INPUTS */
  .row { display: flex; gap: 12px; flex-wrap: wrap; align-items: flex-end; }
  .field { display: flex; flex-direction: column; gap: 6px; flex: 1; min-width: 110px; }

  .field-label {
    font-size: 11px; font-weight: 800; color: var(--muted);
    letter-spacing: 1px; text-transform: uppercase;
    display: flex; align-items: center; gap: 5px;
    min-height: 22px;
  }

  .pill {
    background: rgba(176,110,255,0.12); color: var(--purple);
    border-radius: 20px; padding: 1px 7px; font-size: 9px; font-weight: 700;
    border: 1px solid rgba(176,110,255,0.25);
  }

  input[type="text"], input[type="number"] {
    background: var(--surface2); border: 1.5px solid var(--border);
    border-radius: 12px; color: var(--text);
    font-family: 'Nunito', sans-serif; font-size: 15px; font-weight: 600;
    padding: 11px 14px; outline: none; width: 100%;
    transition: border-color 0.2s, box-shadow 0.2s;
  }
  input:focus { border-color: var(--purple); box-shadow: 0 0 0 3px rgba(176,110,255,0.12); }
  input::placeholder { color: var(--muted); font-weight: 600; }

  /* TOGGLE */
  .toggle-wrapper {
    display: flex; align-items: center; gap: 12px;
    background: var(--surface2); border: 1.5px solid var(--border);
    border-radius: 14px; padding: 13px 15px; cursor: pointer;
    transition: all 0.22s; user-select: none; margin-top: 14px;
  }
  .toggle-wrapper:hover { border-color: rgba(176,110,255,0.35); }
  .toggle-wrapper.active { border-color: var(--purple); background: rgba(176,110,255,0.07); box-shadow: 0 0 22px rgba(176,110,255,0.1); }

  .toggle-switch {
    width: 42px; height: 24px; background: var(--border); border-radius: 12px;
    position: relative; transition: background 0.22s; flex-shrink: 0;
  }
  .toggle-switch::after {
    content: ''; position: absolute; width: 18px; height: 18px;
    background: white; border-radius: 50%; top: 3px; left: 3px;
    transition: transform 0.25s cubic-bezier(.34,1.56,.64,1);
  }
  .toggle-wrapper.active .toggle-switch { background: var(--purple); }
  .toggle-wrapper.active .toggle-switch::after { transform: translateX(18px); }

  .toggle-text { font-size: 13px; font-weight: 700; }
  .toggle-text small { display: block; font-size: 11px; color: var(--muted); margin-top: 2px; font-weight: 600; }

  /* COLORS */
  .colors-grid { display: grid; grid-template-columns: repeat(4,1fr); gap: 8px; }

  .color-btn {
    display: flex; align-items: center; gap: 8px; padding: 10px 12px;
    border-radius: 12px; border: 1.5px solid var(--border); background: var(--surface2);
    color: var(--text); font-family: 'Nunito', sans-serif; font-size: 12px; font-weight: 700;
    cursor: pointer; transition: all 0.18s; user-select: none; text-align: left;
  }
  .color-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0,0,0,0.3); border-color: #555; }
  .color-btn.selected { border-color: var(--purple); box-shadow: 0 0 0 2px rgba(176,110,255,0.3); background: rgba(176,110,255,0.08); }

  .color-dot { width: 14px; height: 14px; border-radius: 50%; flex-shrink: 0; border: 1.5px solid rgba(255,255,255,0.15); }
  .color-name { display: block; }
  .color-code { display: block; font-size: 10px; color: var(--muted); margin-top: 1px; }

  /* STATUS */
  .status-bar {
    display: flex; align-items: center; gap: 8px;
    padding: 10px 14px; border-radius: 12px;
    font-size: 12px; font-weight: 700; margin-top: 12px; transition: all 0.25s;
  }
  .status-bar.idle { background: rgba(107,122,153,0.08); color: var(--muted); border: 1.5px solid var(--border); }
  .status-bar.selected-color { background: rgba(176,110,255,0.08); color: var(--purple); border: 1.5px solid rgba(176,110,255,0.3); }
  .status-bar.warning { background: rgba(232,121,249,0.08); color: var(--pink); border: 1.5px solid rgba(232,121,249,0.3); }

  /* WORD CHIPS */
  .words-area { display: flex; flex-wrap: wrap; gap: 7px; min-height: 44px; padding: 4px 0; }

  .word-chip {
    display: inline-flex; align-items: center; padding: 7px 14px;
    border-radius: 20px; font-size: 14px; font-weight: 700; cursor: pointer;
    background: var(--surface2); border: 1.5px solid var(--border);
    transition: all 0.18s; font-family: 'Nunito', sans-serif; white-space: nowrap; position: relative;
  }
  .word-chip:hover { border-color: var(--purple); transform: translateY(-2px); box-shadow: 0 6px 14px rgba(0,0,0,0.35); }

  .word-chip .remove-color {
    display: none; position: absolute; top: -7px; right: -7px;
    width: 17px; height: 17px; background: var(--pink); border-radius: 50%;
    font-size: 9px; font-weight: 900; align-items: center; justify-content: center;
    color: white; cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.4);
  }
  .word-chip.colored .remove-color { display: flex; }

  .empty-words { color: var(--muted); font-size: 12px; font-weight: 600; padding: 6px 0; font-style: italic; }

  /* SEC LABEL */
  .sec-label {
    font-size: 11px; font-weight: 800; letter-spacing: 1.5px; text-transform: uppercase;
    color: var(--muted); margin-bottom: 10px; display: flex; align-items: center; gap: 6px;
  }
  .sec-label::after { content: ''; flex: 1; height: 1px; background: var(--border); }

  /* PREVIEW */
  .preview-box {
    background: var(--bg); border: 1.5px solid var(--border); border-radius: 14px;
    padding: 15px 18px; min-height: 52px; display: flex; align-items: center; position: relative;
  }
  .preview-box::before {
    content: 'CHAT'; position: absolute; top: 8px; right: 12px;
    font-size: 9px; font-weight: 800; letter-spacing: 2px; color: rgba(176,110,255,0.25);
  }
  .preview-inner { font-size: 17px; font-weight: 800; font-style: italic; text-decoration: underline; color: white; line-height: 1.5; }
  .preview-empty { font-size: 12px; color: var(--muted); font-style: italic; font-weight: 600; text-decoration: none; }

  /* OUTPUT */
  .output-card {
    background: var(--surface); border: 2px solid var(--purple); border-radius: 22px;
    padding: 22px; box-shadow: 0 0 40px rgba(176,110,255,0.1); position: relative; overflow: hidden;
  }
  .output-card::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
    background: linear-gradient(90deg, var(--purple2), var(--purple), var(--pink), var(--purple));
    background-size: 200%; animation: shimmer 3s linear infinite;
  }
  @keyframes shimmer { to { background-position: 200% center; } }

  .output-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 14px; }

  .output-title { font-family: 'Fredoka One', cursive; font-size: 17px; color: var(--purple); }
  .output-title span { color: var(--pink); }

  .copy-btn {
    background: linear-gradient(135deg, var(--purple2), var(--purple)); border: none; color: white;
    font-family: 'Nunito', sans-serif; font-size: 13px; font-weight: 800;
    padding: 9px 20px; border-radius: 20px; cursor: pointer; transition: all 0.2s;
    box-shadow: 0 4px 16px rgba(124,58,237,0.35);
  }
  .copy-btn:hover { transform: translateY(-2px) scale(1.04); box-shadow: 0 8px 24px rgba(124,58,237,0.4); }
  .copy-btn.copied { background: linear-gradient(135deg, #4d7c0f, var(--green)); box-shadow: 0 4px 16px rgba(163,230,53,0.3); }

  .output-code {
    background: var(--bg); border: 1.5px solid var(--border); border-radius: 14px;
    padding: 15px 16px; font-size: 12px; font-family: 'Courier New', monospace;
    word-break: break-all; line-height: 1.9; color: var(--purple); min-height: 52px;
  }

  .text-section { transition: opacity 0.3s, transform 0.3s; }
  .text-section.hidden { opacity: 0.18; pointer-events: none; transform: scale(0.99); filter: grayscale(1); }

  .gap-s { margin-top: 14px; }

  @media (max-width: 600px) {
    header { padding: 14px 14px; }
    h1 { font-size: 19px; }
    main { padding: 18px 10px 80px; }
    .colors-grid { grid-template-columns: repeat(2,1fr); }
    .step-desc { padding-left: 0; }
  }
</style>
</head>
<body>

<header>
  <div class="logo">üéÆ</div>
  <div>
    <h1>Bind Creator ‚ú®</h1>
    <div class="subtitle">FiveM ¬∑ Roleplay ¬∑ Emote Builder</div>
  </div>
</header>

<main>

  <!-- STEP 1 -->
  <div class="card">
    <div class="step-header">
      <div class="step-badge">1</div>
      <div class="step-title">Configura√ß√£o b√°sica üéÆ</div>
    </div>
    <div class="step-desc">
      <strong>Tecla</strong> ‚Äî bot√£o que voc√™ aperta no jogo pra ativar a bind (ex: F5, G, H)<br>
      <strong>Tamanho</strong> ‚Äî tamanho da letra do texto no chat<br>
      <strong>Anima√ß√£o</strong> ‚Äî emote do personagem (ex: <strong>e dancar</strong>, <strong>e sentar</strong>)
    </div>
    <div class="row">
      <div class="field" style="flex:0 0 110px; min-width:0;">
        <div class="field-label">‚å®Ô∏è Tecla <span class="pill">ex: F5</span></div>
        <input type="text" id="tecla" placeholder="F5" maxlength="20">
      </div>
      <div class="field" style="flex:0 0 110px; min-width:0;">
        <div class="field-label">üî§ Tamanho <span class="pill">fonte</span></div>
        <input type="text" id="tamanho" value="30" placeholder="30" maxlength="3">
      </div>
      <div class="field" style="flex:1 1 160px; min-width:0;">
        <div class="field-label">üï∫ Anima√ß√£o <span class="pill">principal</span></div>
        <input type="text" id="animacao" placeholder="e dancar" oninput="updateOutput()">
      </div>
    </div>

    <!-- Extra animations -->
    <div id="extraAnimacoesWrap" style="margin-top:10px;display:flex;flex-direction:column;gap:8px;"></div>

    <button onclick="addAnimacao()" style="margin-top:10px;background:rgba(176,110,255,0.10);border:1.5px dashed rgba(176,110,255,0.4);color:var(--purple);font-family:'Nunito',sans-serif;font-weight:800;font-size:13px;padding:9px 18px;border-radius:12px;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;gap:7px;width:100%;" onmouseover="this.style.background='rgba(176,110,255,0.18)';this.style.borderColor='var(--purple)'" onmouseout="this.style.background='rgba(176,110,255,0.10)';this.style.borderColor='rgba(176,110,255,0.4)'">
      <span style="font-size:17px;line-height:1;">Ôºã</span> Adicionar anima√ß√£o
    </button>
    
    <div class="toggle-wrapper" id="semTextoToggle" onclick="toggleSemTexto()">
      <div class="toggle-switch"></div>
      <div class="toggle-text">
        Bind <strong>sem texto</strong> ‚Äî s√≥ anima√ß√£o üé≠
        <small>Ative para usar apenas o emote, sem aparecer texto no chat</small>
      </div>
    </div>
  </div>

  <!-- STEP 2 -->
  <div class="card text-section" id="textSection">
    <div class="step-header">
      <div class="step-badge">2</div>
      <div class="step-title">Digite o texto üí¨</div>
    </div>
    <div class="step-desc">
      Escreva o que vai aparecer no chat quando voc√™ apertar a tecla.<br>
      N√£o precisa se preocupar com cores ainda, isso vem no pr√≥ximo passo!
    </div>
    <div class="field-label" style="margin-bottom:8px;">üí¨ Seu texto</div>
    <input type="text" id="textoInput" placeholder="Ex: Oi pessoal, t√¥ dan√ßando!" oninput="renderWords()">
  </div>

  <!-- STEP 3 -->
  <div class="card text-section" id="textSection2">
    <div class="step-header">
      <div class="step-badge">3</div>
      <div class="step-title">Colorir as palavras üé®</div>
    </div>
    <div class="step-desc">
      <strong>Passo 1:</strong> Clique em uma cor da paleta para selecion√°-la.<br>
      <strong>Passo 2:</strong> Clique em uma ou mais palavras para aplicar a cor.<br>
      Para remover, clique no <strong style="color:var(--pink)">‚úï</strong> que aparece em cima da palavra.
    </div>

    <div class="sec-label">üé® Paleta de cores</div>
    <div class="colors-grid">
      <button class="color-btn" data-code="~y~" onclick="selectColor(this)">
        <span class="color-dot" style="background:#ffff00"></span>
        <span><span class="color-name">Amarelo</span><span class="color-code">~y~</span></span>
      </button>
      <button class="color-btn" data-code="~r~" onclick="selectColor(this)">
        <span class="color-dot" style="background:#ff4444"></span>
        <span><span class="color-name">Vermelho</span><span class="color-code">~r~</span></span>
      </button>
      <button class="color-btn" data-code="~g~" onclick="selectColor(this)">
        <span class="color-dot" style="background:#44dd44"></span>
        <span><span class="color-name">Verde</span><span class="color-code">~g~</span></span>
      </button>
      <button class="color-btn" data-code="~b~" onclick="selectColor(this)">
        <span class="color-dot" style="background:#4488ff"></span>
        <span><span class="color-name">Azul</span><span class="color-code">~b~</span></span>
      </button>
      <button class="color-btn" data-code="~q~" onclick="selectColor(this)">
        <span class="color-dot" style="background:#ff69b4"></span>
        <span><span class="color-name">Rosa</span><span class="color-code">~q~</span></span>
      </button>
      <button class="color-btn" data-code="~p~" onclick="selectColor(this)">
        <span class="color-dot" style="background:#9b59b6"></span>
        <span><span class="color-name">Roxo</span><span class="color-code">~p~</span></span>
      </button>
      <button class="color-btn" data-code="~v~" onclick="selectColor(this)">
        <span class="color-dot" style="background:#444;border-color:#666"></span>
        <span><span class="color-name">Preto</span><span class="color-code">~v~</span></span>
      </button>
      <button class="color-btn" data-code="~w~" onclick="selectColor(this)">
        <span class="color-dot" style="background:#fff;border-color:#aaa"></span>
        <span><span class="color-name">Branco</span><span class="color-code">~w~</span></span>
      </button>
    </div>

    <div class="status-bar idle" id="statusBar">
      <span id="statusIcon">üí°</span>
      <span id="statusText">Selecione uma cor acima para come√ßar!</span>
    </div>

    <div class="gap-s">
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;">
        <div class="sec-label" style="flex:1;margin:0 10px 0 0;">üñ±Ô∏è Clique nas palavras para colorir</div>
        <button onclick="clearColors()" style="background:none;border:1.5px solid var(--border);color:var(--muted);font-family:'Nunito',sans-serif;font-weight:700;font-size:11px;padding:5px 12px;border-radius:20px;cursor:pointer;transition:all 0.2s;" onmouseover="this.style.borderColor='var(--pink)';this.style.color='var(--pink)'" onmouseout="this.style.borderColor='var(--border)';this.style.color='var(--muted)'">‚úï Limpar cores</button>
      </div>
      <div class="words-area" id="wordChips">
        <span class="empty-words">‚úçÔ∏è Escreva o texto no passo 2 para ver as palavras aqui...</span>
      </div>
    </div>

    <div class="gap-s">
      <div class="sec-label">üëÅÔ∏è Preview ‚Äî como vai aparecer no jogo</div>
      <div class="preview-box">
        <div class="preview-inner" id="previewText">
          <span class="preview-empty">Aguardando texto... ‚ú®</span>
        </div>
      </div>
    </div>
  </div>

  <!-- OUTPUT -->
  <div class="output-card">
    <div class="output-header">
      <div class="output-title">‚ú® Comando pronto! <span>Cole no console do FiveM</span></div>
      <button class="copy-btn" id="copyBtn" onclick="copyBind()">üìã Copiar</button>
    </div>
    <div class="output-code" id="outputText"></div>
  </div>

</main>

<!-- FOOTER CR√âDITOS -->
<footer>
  <div class="footer-glow"></div>
  <div class="footer-content">
    <div class="footer-stars">‚ú¶ Àö ¬∑ ‚úß Àö ¬∑ ‚ú¶ ‚úß ¬∑ Àö ‚ú¶ ¬∑ ‚úß Àö ‚ú¶</div>
    <div class="footer-name">Nivyk Reis</div>
    <div class="footer-tag">n√© vida</div>
    <div class="footer-quote">"Quer me pegar de exemplo? V√™ se assiste e aprende um pouco"</div>
    <div class="footer-author">Mc Marks ¬∑ 2024</div>
    <div class="footer-stars" style="margin-top:16px;">‚ú¶ Àö ¬∑ ‚úß Àö ¬∑ ‚ú¶ ‚úß ¬∑ Àö ‚ú¶ ¬∑ ‚úß Àö ‚ú¶</div>
  </div>
</footer>

<style>
footer {
  position: relative;
  margin-top: 20px;
  padding: 52px 20px 44px;
  text-align: center;
  border-top: 1px solid var(--border);
  overflow: hidden;
}

.footer-glow {
  position: absolute;
  top: 0; left: 50%; transform: translateX(-50%);
  width: 600px; height: 220px;
  background: radial-gradient(ellipse at center top, rgba(176,110,255,0.16) 0%, transparent 70%);
  pointer-events: none;
}

.footer-stars {
  font-size: 13px;
  color: rgba(176,110,255,0.35);
  letter-spacing: 10px;
}

.footer-name {
  font-family: 'Fredoka One', cursive;
  font-size: 64px;
  line-height: 1;
  margin: 18px 0 6px;
  background: linear-gradient(135deg, #c084fc, var(--purple), var(--pink), #a855f7);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  background-size: 200%;
  animation: nameShimmer 4s ease-in-out infinite alternate;
  filter: drop-shadow(0 0 32px rgba(176,110,255,0.45));
  letter-spacing: 1px;
}

@keyframes nameShimmer {
  from { background-position: 0% center; }
  to   { background-position: 100% center; }
}

.footer-tag {
  font-family: 'Fredoka One', cursive;
  font-size: 22px;
  color: var(--pink);
  letter-spacing: 4px;
  margin-bottom: 26px;
  opacity: 0.85;
}

.footer-quote {
  font-family: 'Nunito', sans-serif;
  font-size: 15px;
  font-weight: 700;
  font-style: italic;
  color: var(--text);
  max-width: 500px;
  margin: 0 auto 10px;
  line-height: 1.75;
  opacity: 0.8;
  border-left: 3px solid var(--purple);
  padding-left: 16px;
  text-align: left;
}

.footer-author {
  font-family: 'Nunito', sans-serif;
  font-size: 12px;
  font-weight: 800;
  color: var(--muted);
  letter-spacing: 2px;
  text-transform: uppercase;
  max-width: 500px;
  margin: 0 auto;
  padding-left: 19px;
  text-align: left;
}
</style>

<script>
  let wordColors = {}, selectedColor = null, words = [];
  let extraAnimCount = 0;

  function addAnimacao() {
    extraAnimCount++;
    const id = 'animacao_extra_' + extraAnimCount;
    const wrap = document.getElementById('extraAnimacoesWrap');
    const div = document.createElement('div');
    div.id = 'wrap_' + id;
    div.style.cssText = 'display:flex;gap:8px;align-items:center;';
    div.innerHTML = `
      <div class="field" style="flex:1;min-width:0;">
        <div class="field-label" style="font-size:10px;">üï∫ Anima√ß√£o extra ${extraAnimCount}</div>
        <input type="text" id="${id}" placeholder="e bora" oninput="updateOutput()" style="width:100%;">
      </div>
      <button onclick="removeAnimacao('${id}')" title="Remover" style="margin-top:22px;background:rgba(232,121,249,0.10);border:1.5px solid rgba(232,121,249,0.3);color:var(--pink);font-family:'Nunito',sans-serif;font-weight:800;font-size:16px;width:38px;height:38px;border-radius:10px;cursor:pointer;flex-shrink:0;transition:all 0.18s;" onmouseover="this.style.background='rgba(232,121,249,0.22)'" onmouseout="this.style.background='rgba(232,121,249,0.10)'">‚úï</button>
    `;
    wrap.appendChild(div);
    updateOutput();
  }

  function removeAnimacao(id) {
    const wrap = document.getElementById('wrap_' + id);
    if (wrap) wrap.remove();
    updateOutput();
  }

  function getAllAnimacoes() {
    const main = document.getElementById('animacao').value.trim();
    const extras = Array.from(document.querySelectorAll('#extraAnimacoesWrap input'))
      .map(inp => inp.value.trim())
      .filter(v => v.length > 0);
    const all = [];
    if (main) all.push(main);
    all.push(...extras);
    return all;
  }

  const colorMap = {
    '~y~':'#ffff00','~r~':'#ff4444','~g~':'#44dd44',
    '~b~':'#4488ff','~q~':'#ff69b4','~p~':'#9b59b6',
    '~v~':'#555','~w~':'#ffffff',
  };
  const colorNames = {
    '~y~':'Amarelo','~r~':'Vermelho','~g~':'Verde',
    '~b~':'Azul','~q~':'Rosa','~p~':'Roxo',
    '~v~':'Preto','~w~':'Branco',
  };

  function toggleSemTexto() {
    const w = document.getElementById('semTextoToggle');
    w.classList.toggle('active');
    const on = w.classList.contains('active');
    document.getElementById('textSection').classList.toggle('hidden', on);
    document.getElementById('textSection2').classList.toggle('hidden', on);
    updateOutput();
  }

  function isSemTexto() { return document.getElementById('semTextoToggle').classList.contains('active'); }

  function selectColor(btn) {
    if (btn.classList.contains('selected')) {
      btn.classList.remove('selected'); selectedColor = null;
      setStatus('idle','üí°','Selecione uma cor acima para come√ßar!'); return;
    }
    document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('selected'));
    btn.classList.add('selected');
    selectedColor = btn.getAttribute('data-code');
    setStatus('selected-color','‚úÖ',`"${colorNames[selectedColor]}" selecionado ‚Äî agora clique em uma palavra!`);
  }

  function setStatus(type, icon, text) {
    document.getElementById('statusBar').className = 'status-bar ' + type;
    document.getElementById('statusIcon').textContent = icon;
    document.getElementById('statusText').textContent = text;
  }

  function renderWords() {
    const input = document.getElementById('textoInput').value;
    words = input.split(' ').filter(w => w.length > 0);
    Object.keys(wordColors).forEach(k => { if (k >= words.length) delete wordColors[k]; });

    const chips = document.getElementById('wordChips');
    chips.innerHTML = '';

    if (words.length === 0) {
      chips.innerHTML = '<span class="empty-words">‚úçÔ∏è Escreva o texto no passo 2 para ver as palavras aqui...</span>';
      document.getElementById('previewText').innerHTML = '<span class="preview-empty">Aguardando texto... ‚ú®</span>';
      updateOutput(); return;
    }

    words.forEach((word, i) => {
      const chip = document.createElement('span');
      chip.className = 'word-chip';
      const color = wordColors[i];
      if (color) {
        chip.classList.add('colored');
        chip.style.color = colorMap[color];
        chip.style.borderColor = colorMap[color];
        chip.style.background = colorMap[color] + '22';
        const rm = document.createElement('span');
        rm.className = 'remove-color'; rm.textContent = '√ó';
        rm.onclick = (e) => { e.stopPropagation(); delete wordColors[i]; renderWords(); };
        chip.appendChild(rm);
      }
      chip.insertBefore(document.createTextNode(word), chip.firstChild);
      chip.onclick = () => applyColorToWord(i);
      chips.appendChild(chip);
    });
    updatePreview(); updateOutput();
  }

  function applyColorToWord(index) {
    if (!selectedColor) { setStatus('warning','‚ö†Ô∏è','Primeiro selecione uma cor na paleta acima!'); return; }
    if (wordColors[index] === selectedColor) delete wordColors[index];
    else wordColors[index] = selectedColor;
    renderWords();
  }

  function clearColors() { wordColors = {}; renderWords(); setStatus('idle','üßπ','Cores removidas! Selecione uma nova cor para come√ßar.'); }

  function buildColoredText() {
    if (words.length === 0) return '';
    let result = '', i = 0;
    while (i < words.length) {
      const color = wordColors[i];
      if (color) {
        let group = words[i], j = i + 1;
        while (j < words.length && wordColors[j] === color) { group += ' ' + words[j]; j++; }
        result += (result ? ' ' : '') + color + group + color; i = j;
      } else { result += (result ? ' ' : '') + words[i]; i++; }
    }
    return result;
  }

  function updatePreview() {
    const preview = document.getElementById('previewText');
    if (words.length === 0) { preview.innerHTML = '<span class="preview-empty">Aguardando texto... ‚ú®</span>'; return; }
    let html = '';
    words.forEach((word, i) => {
      const color = wordColors[i];
      html += `<span style="color:${color ? colorMap[color] : '#fff'}">${word}</span> `;
    });
    preview.innerHTML = html;
  }

  function buildBind() {
    const tecla = document.getElementById('tecla').value.trim() || 'TECLA';
    const tamanho = document.getElementById('tamanho').value.trim() || '30';
    const animacoes = getAllAnimacoes();
    const animStr = animacoes.length > 0 ? animacoes.join(' ; ') : 'e dancar';
    if (isSemTexto()) return `bind keyboard "${tecla}" "${animStr}"`;
    const coloredText = buildColoredText() || 'SEU TEXTO AQUI';
    return `bind keyboard "${tecla}" "me ~HC_230~ <font size = '${tamanho}'> <b><i><u>  ~ws~  ${coloredText} ~ws~ ; ${animStr}"`;
  }

  function updateOutput() { document.getElementById('outputText').textContent = buildBind(); }

  function copyBind() {
    navigator.clipboard.writeText(buildBind()).then(() => {
      const btn = document.getElementById('copyBtn');
      btn.textContent = '‚úÖ Copiado!'; btn.classList.add('copied');
      setTimeout(() => { btn.textContent = 'üìã Copiar'; btn.classList.remove('copied'); }, 2500);
    });
  }

  ['tecla','tamanho','animacao'].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.addEventListener('input', updateOutput);
  });
  updateOutput();
</script>
</body>
</html>